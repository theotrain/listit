<% content_for :javascript do %>
  <%= javascript_tag do %>
    $(document).ready(function(){
      $(".checkbox").change(function() {
        if(this.checked) {
          //alert('we checked!');
          // get the vale of this id, like 'ckeckbox_23',
          // use the number to:
          //   - save the Item.id.active = false
          //   - change the #item_23 to light grey, or lower opacity 
          $('#item_3').css("opacity",0.5);
          }
          else {
            //alert('we unchecked');
          }
      });


      // alert('document ready');
      $('#items').sortable({
        axis: 'y',
        dropOnEmpty: false,
        handle: '.handle',
        cursor: 'crosshair',
        items: 'li',
        opacity: 0.4,
        scroll: false,
        
        update: function(){
          // alert('what what?');
          $.ajax({
          type: 'post',
          data: $('#items').sortable('serialize'),
          dataType: 'script',
          complete: function(request){
          // $('#items').effect('highlight');
        },
        url: '/users/sort'})
        }

      });
    });
  <% end %>
<% end %>

<ul id='items'> 

  <% @items.each do |item| %>
    <li id="item_<%= item.id %>" > 
      <div id="item-box" class="rounded-corners handle">
        <span id="item-check" class="checkbox-inline">
          <input class="checkbox" id="checkbox_<%= item.id %>" type="checkbox" name="vehicle" value="Bike" >
        </span>
        <span id="item-name">
          <%= item.body %>
        </span>
        <span id="item-right">
          <span id="item-sms">
            SMS: Wednesday, Dec 24 5:25 PM
          </span>
          <span id="item-edit">
          <span class="icon-pencil"></span>
          </span>
          <span id="item-remove">
            <%= link_to(root_path) do %>
              <span class='icon-remove'></span>
            <% end %>
          </span>
        </span>
      </div>
    </li>
  <% end %>

</ul>
